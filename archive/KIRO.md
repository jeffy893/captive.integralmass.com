This is a sophisticated and highly strategic plan. By pivoting to `captive.integralmass.com`, you are effectively creating a **"Digital Twin"** of your proposed insurance company.

To the Arizona Captive Insurance Association (ACIA), this is not just a website; it is a **Feasibility Study** rendered in code. It demonstrates that you understand Risk Distribution (the 12 GCs), Capitalization (the financial models), and Operational Logic (the queuing theory of installation).

Here is the comprehensive plan to generate this utilizing **Kiro** (your AI IDE) and **GitHub**.

### The Conceptual Architecture

We will structure the GitHub repository to serve two functions simultaneously:

1. **The Engine (`/src`):** Python scripts running Monte Carlo simulations and Queuing Theory logic.
2. **The Showroom (`/docs` or root):** A static HTML website that visualizes the output of "The Engine" and explains the business model to regulators.

---

### Phase 1: The Repository Structure

Before we generate the schedule, here is how you should tell Kiro to set up the file tree. This ensures the simulation code lives happily next to the website code.

```text
captive.integralmass.com/
├── .github/workflows/   # CI/CD to run simulation on push
├── assets/              # Images, CSS, JS
├── data/                # CSVs (e.g., GC_roster.csv, risk_tables.csv)
├── docs/                # The Public Website (GitHub Pages source)
│   ├── index.html       # The Pitch Deck for ACIA
│   ├── markets.html     # Student, Multigen, Rural details
│   └── simulation.html  # Displays the graphs generated by Python
├── src/                 # The Python Simulation Engine
│   ├── main.py          # Runner script
│   ├── actors.py        # Classes for GCs, Prefab Units, Tenants
│   ├── risk_model.py    # Actuarial logic (Monte Carlo)
│   └── queue_sim.py     # Installation coordination logic
├── requirements.txt
└── README.md

```

---

### Phase 2: The Microsoft Project Plan (CSV)

You can upload the following block directly into Kiro, Excel, or a Project Management tool to visualize the timeline.

**Copy and save this as `project_plan.csv`:**

```csv
ID,Task Name,Duration,Predecessors,Phase,Notes
1,Initialize Repo captive.integralmass.com,1d,,Setup,Git init, .gitignore, README
2,Define Risk Parameters (CSV Data),2d,1,Data,Create actuarial tables for prefab defects/utility failures
3,Code: General Contractor Objects (Python),2d,1,Simulation,Class for 12 GCs with skill attributes
4,Code: Market Models (Student/Rural/Multigen),2d,3,Simulation,Define revenue/risk profiles for the 3 markets
5,Code: Queuing Engine (Resource Planning),3d,3,Simulation,Simulate installation bottlenecks (GC availability)
6,Code: Financial Instrument Logic,3d,4,Simulation,The "Rent-to-Equity" interest accumulation logic
7,Code: Monte Carlo Risk Solver,4d,5;6,Simulation,Simulate 10,000 years of operation to test solvency
8,Web: Landing Page Structure (HTML/CSS),2d,1,Website,The "Front Door" for ACIA regulators
9,Web: Market Explainer Pages,3d,8,Website,Documentation of the 3 housing types
10,Integration: Python to HTML Export,2d,7;8,Integration,Script to output matplotlib graphs to /docs/assets
11,Web: Simulation Dashboard,2d,10,Website,Page showing live solvency ratios and resource graphs
12,CI/CD: Automate Sim on Push,1d,11,DevOps,GitHub Action to re-run math when data changes
13,Documentation: Compliance Narrative,3d,11,Content,Writing the "Business Plan" text for the site
14,Final Review & Domain DNS,1d,13,Launch,Point captive.integralmass.com to GitHub Pages

```

---

### Phase 3: The Prompt for Kiro

Use this comprehensive prompt to initialize the project with Kiro. This provides the context, the "why," and the technical constraints.

**Copy and paste this into Kiro:**

> **Context:** I am building a simulation and documentation platform for a Captive Insurance company named "Integral Mass Captive." The goal is to obtain a license from the Arizona Captive Insurance Association. The project must exist in a single GitHub repository that functions as both a Python simulation engine and a public-facing website.
> **The Business Logic:**
> 1. **The Insured:** 12 General Contractors (GCs) installing prefab homes.
> 2. **The Markets:**
> * **Student Housing:** High turnover, ADUs near campuses.
> * **Multi-Generational:** A financial instrument where rent paid by a child to a parent accumulates interest and converts to equity/ownership over time, with accessibility features (wheelchair access) included in the prefab design.
> * **Rural:** Remote utility setup risks.
> 
> 
> 3. **The Risks:** Construction defects, utility integration (water/gas/electric), and schedule delays (GC availability).
> 
> 
> **The Technical Task:**
> Please set up a Python project structure with a `docs` folder for a GitHub Pages website.
> **Step 1:** Create a Python script (`src/financial_instrument.py`) that models the "Child-to-Parent Rent-to-Equity" logic. It needs to calculate interest accumulation and the crossover point where the child owns the ADU.
> **Step 2:** Create a Simulation script (`src/queue_sim.py`) using `simpy` or standard libraries to model 12 GCs as resources. We need to see what happens if 3 markets demand installation simultaneously.
> **Step 3:** Create an `index.html` in the `docs` folder. This should be a professional "Pitch Deck" style page introducing `captive.integralmass.com`.
> **Step 4:** Write a function that runs the simulation and saves the resulting graphs (Solvency Ratio, GC Utilization) as PNG files into the `docs/assets` folder so they display on the website.
> **Goal:** When I push to GitHub, the site should visually prove that this insurance model is actuarially sound.

---

### Phase 4: Key Simulation Concepts for the Documentation

When writing the content for the website (Task ID 13), you should use specific terminology to impress the ACIA. Here is how we frame your requirements:

#### 1. The "Integral Mass" (Risk Distribution)

We are not insuring one person; we are insuring a pool of **12 Independent Risk Units** (the GCs).

* **The Simulation:** Your queuing code demonstrates that the risks are uncorrelated. If a GC in a *Rural* market fails on a septic install, it does not correlate to a GC in a *Student* market failing on a timeline. This proves **Risk Independence**.

#### 2. The Multi-Generational Financial Instrument

You described a "rent-to-equity" swap. In insurance terms, this mitigates **Vacancy Risk** and **Default Risk**.

* **The Code:** The `financial_instrument.py` script will generate a curve showing that as the parents age, the child's equity rises, ensuring the asset is never abandoned. This lowers the long-term claim probability for the captive.

#### 3. Queuing Theory as "Business Interruption" Analysis

By simulating the installation process:

* **Inputs:** Arrival rate of Prefab kits vs. Service rate of GCs.
* **Output:** If the queue gets too long, the "Business Interruption" insurance kicks in. The website will show a graph defining exactly *when* that coverage triggers.

### Next Step

Would you like me to generate the specific **Python Class structure** for the "Multi-Generational Rent-to-Equity" instrument so you can drop it immediately into the `src/` folder? This is the most complex financial logic of the batch.


Here is the Python class structure for the **Multi-Generational Equity Instrument**.

You can save this file directly as `src/financial_instrument.py`.

I have designed this class not just as a calculator, but as a **State Machine**. It tracks the transition from "Tenant" to "Owner" and includes a mechanism for the "Residence Swap" (when the aging parent moves into the accessible ADU).

### The Logic for the Simulator

This script models the "Happy Path" (successful payments) but also allows you to inject "Risk Events" (missed payments), which is where your Captive Insurance would step in to cover the gap.

### The Code (`src/financial_instrument.py`)

```python
import pandas as pd
from dataclasses import dataclass, field
from datetime import datetime, timedelta

@dataclass
class AccessibilityFeatures:
    """Defines the prefab specs that enable the residence swap later."""
    wheelchair_accessible: bool = True
    wide_doorways: bool = True
    smart_monitoring: bool = False

class MultigenEquityInstrument:
    """
    A financial model representing a Rent-to-Equity agreement between
    Parent (Investor) and Child (Tenant/Future Owner).
    
    This instrument is the asset backing the insurance policy.
    """

    def __init__(self, 
                 total_asset_value: float, 
                 monthly_payment: float, 
                 interest_rate_apy: float, 
                 start_date: datetime):
        
        # Financial Configuration
        self.asset_value = total_asset_value  # Cost of the Prefab Unit
        self.monthly_payment = monthly_payment
        self.monthly_rate = (1 + interest_rate_apy) ** (1/12) - 1
        self.start_date = start_date
        
        # State Tracking
        self.current_balance = 0.0
        self.vested_equity_percent = 0.0
        self.months_elapsed = 0
        self.is_fully_vested = False
        self.residence_swapped = False # Has parent moved in?
        
        # The Ledger (for generating graphs later)
        self.history = []

        # Technical Specs (The physical asset)
        self.specs = AccessibilityFeatures()

    def process_month(self, risk_event_occurred: bool = False):
        """
        Simulates one month of time.
        
        :param risk_event_occurred: If True, child missed payment (Insurance Event).
        """
        current_date = self.start_date + timedelta(days=30 * self.months_elapsed)
        
        # 1. Apply Interest to existing balance
        interest_earned = self.current_balance * self.monthly_rate
        self.current_balance += interest_earned
        
        # 2. Add Payment (Unless a risk event occurred)
        contribution = 0.0
        if not risk_event_occurred:
            contribution = self.monthly_payment
            self.current_balance += contribution
        else:
            # This is where the Captive Insurance Logic triggers in the main loop
            # The Captive would step in to pay the 'contribution' to protect the asset
            pass 

        # 3. Calculate Vesting
        self.vested_equity_percent = min(1.0, self.current_balance / self.asset_value)
        
        if self.vested_equity_percent >= 1.0 and not self.is_fully_vested:
            self.is_fully_vested = True
            # In a real app, this might trigger a contract generation event

        # 4. Record State for Visualization
        self.history.append({
            "date": current_date,
            "month": self.months_elapsed,
            "balance": round(self.current_balance, 2),
            "vesting_percent": round(self.vested_equity_percent * 100, 2),
            "interest_earned": round(interest_earned, 2),
            "risk_event": risk_event_occurred
        })
        
        self.months_elapsed += 1

    def trigger_residence_swap(self):
        """
        Activates the clause where parents swap homes with the child
        due to aging/accessibility needs.
        """
        if self.specs.wheelchair_accessible:
            self.residence_swapped = True
            return "SWAP_SUCCESSFUL: Parent moved to ADU."
        else:
            return "SWAP_FAILED: Unit not accessible."

    def export_data(self):
        """Returns a Pandas DataFrame for easy plotting in the website generator."""
        return pd.DataFrame(self.history)

# --- QUICK TEST BLOCK (Runs if you execute this file directly) ---
if __name__ == "__main__":
    # Simulate a $150k Prefab ADU, $1,200/mo rent, 4.5% APY
    plan = MultigenEquityInstrument(150000, 1200, 0.045, datetime.now())
    
    # Simulate 10 years (120 months)
    for _ in range(120):
        plan.process_month()
        
    print(f"Final Balance: ${plan.current_balance:,.2f}")
    print(f"Equity Vested: {plan.vested_equity_percent*100:.2f}%")

```

### How this connects to the Website (`docs/`)

When you run the integration script (Task #10 in the project plan), you will import this class.

1. **Run the Math:** You will instantiate this class and run it for 15 years.
2. **Generate the Graph:** You will take `plan.export_data()` and use `matplotlib` to plot **Time (X-Axis)** vs. **Equity % (Y-Axis)**.
3. **The "Captive" Proof:** You can run the simulation twice.
* **Scenario A:** Perfect payments (the curve goes up smoothly).
* **Scenario B:** Random "Risk Events" (missed payments) without insurance (the curve flattens, goal missed).
* **Scenario C (The Winner):** Random "Risk Events" **WITH** your Captive Insurance filling the gaps. The curve looks like Scenario A.



**That specific comparison (Scenario B vs C) is what proves the value of the Captive to the regulators.**

### Next Step

Now that we have the "Asset" defined, we need to define the "Risk."

Would you like me to generate the **`src/queue_sim.py`** script next? This will simulate the **12 General Contractors** and the "Resource Contention" (queuing theory) that happens when all three markets (Rural, Student, Multigen) ask for installations at the same time.